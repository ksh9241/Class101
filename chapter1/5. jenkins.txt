- jenkins의 기능
 - build & deploy (빌드 & 배포)
 - batch (배치) 일괄처리(실시간처리 x 주기적으로 처리)

- worker instance로 jenkins instance만 들어가도록 접속해주는 방식 ★★★
비대칭 키 사용. (공개키, 개인키)
비대칭키 : 암호화할 때와 복호화 할 때 사용하는 키가 다르다. (상관없다 x. 관계는있지만 같지않다.)
공개키로 암호화 한 것은 개인키로 복호화할 수 있다.
ex) A에게 비밀메시지를 보내고 싶으면 A의 공개키로 암호화하고 A만 개인키로 확인하게 함.

- 서명 : 개인키로 암호화 하고 공개키로 복호화하는 것.
이 방식은 A는 자신을 증명할 수 있다. (개인키로 암호화 할 수 있는 것은 오직 A뿐이기 때문에)

할일 : jenkins의 공개키와 개인키를 만들어준 뒤 worker instance에 jenkins의 공개키를 등록해주면 jenkins의 정보만 읽을 수 있다.

- jenkins setting
1. jenkins instance 생성
2. jenkins instance SSH 접속 후 jenkins install tutorial 따라하기
3. sudo systemctl start jenkins
4. sudo systemctl status jenkins (jenkins server status check)
5. GCP VPC네트워크 방화벽 -> 방화벽 규칙 만들기 (방화벽 규칙 튜토리얼)

active(running) == worker setting 실행

 - Dashboard Jenkins
6. 외부IP:8080 이동 후 초기 비밀번호 세팅해줘야되는데 페이지 내 경로에 초기 비밀번호 있음.
7. sudo cat /var/lib/jenkins/secrets/initialAdminPassword 입력 후 나오는 hash code 비슷한 비밀번호 입력
8. jenkins 설치(왼쪽) 및 계정 생성 및 url 처리
9. jenkins 관리 -> 플러그인 관리 ->설치가능 탭 -> 검색창에 SSH검색 -> Publish Over SSH 체크 후 재시작없이 설치 클릭
10. jenkins 관리 -> 시스템 설정 -> 제일 하단 Publish Over SSH -> key 영역에 jenkins의 개인키를 입력 (vi id_rsa 내 정보) ->SSH Servers 추가 -> name : GCP instance name, Hostname : 내부IP, username : Shell 로그인 name, homedirectory : (cd ~ -> pwd) -> TestConfiguration
11. 새로운 item클릭 후 이름 설정 하고 Freestyle project 클릭 후 Ok
12. 하단에 빌드 후 조치 항목에서 Send build artifacts over SSH 항복으로 변경 후 고급클릭 -> Verbose output in console 체크 -> Exec command 안에 docker run -p 8080:80 [도커허브아이디]/[도커허브명] 입력 후 저장
13. worker-instance 도커 설치 및 도커 데몬 실행과 권한을 666으로 변경
14. build now 클릭 -> bulid History 최근생성 directory 클릭 후 Console Output클릭

- worker setting (jenkins만 worker로 들어갈 수 있도록 세팅해줘야함.)
1. worker instance 생성
2. jenkins 공개키 만들기 튜토리얼 수행
3. vi ~/.ssh/authorized_keys 로 이동하여 worker key 정보 페이지로 이동
4. 제일 아래로 내려온 뒤 A를 누르면 하단에 insert로 바뀐 뒤 엔터
5. jenkins의 공개키를 붙여넣기 하고 esc
6. :wq로 나가기
7. chmod 700 ~/.ssh 를 작성하여 권한 변경
8. chmod 600 ~/.ssh/authorized_keys

- jenkins install tutorial
1. sudo yum install wget
2. sudo yum install java
3. sudo yum install git
4. sudo yum install docker
5. (jenkins설치 시 패키지 필요)
5-1. sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
5-2. sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
5-3. sudo yum install jenkins

- 방화벽 규칙 만들기 tutorial
1. 이름,설명 설정.
2. 대상 처리 (네트워크의 모든 인스턴스)
3. 소스 IP 범위 (0.0.0.0/0 : 모든범위)
4. 프로토콜 및 포트 지정된 프로토콜 및 포트 체크 (tcp : 방화벽 허용 포트번호 입력)
- jenkins 개인키 및 공개키 만들기 튜토리얼
1. ssh-keygen -t rsa -f ~/.ssh/id_rsa ->엔터 -> 엔터
2. 키정보 확인법 cd .ssh -> ls -> 왼쪽 개인키, 오른쪽 공개키
3. 공개키 확인하기 vi id_rsa.pub
4. 나오는 내용 전부 복사